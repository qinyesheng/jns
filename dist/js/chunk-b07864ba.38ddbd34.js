(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b07864ba"],{"0622":function(t,e,n){"use strict";var a=n("be18"),o=n.n(a);o.a},1354:function(t,e,n){"use strict";var a=n("305e"),o=n.n(a);o.a},"305e":function(t,e,n){},"372d":function(t,e,n){"use strict";n.r(e);var a,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ready?n("div",{staticClass:"page"},[n("headerOne",{attrs:{title:"报告详情",isFixed:!0,backgroundStatus:!0,rightText:t.qrCodeLink?"分享":"",onClickLeftStatus:!0},on:{onClickLeft:t.back,onClickRight:t.reportShare}}),n("vehicleReportTemplate",{attrs:{baseInfo:t.baseInfo,report:t.report,sysInfo:t.sysInfo,scoreCondition:t.scoreCondition,makeResult:t.makeResult,maintainScheme:t.maintainScheme,selectBtnName:t.selectBtnName,adList:t.adList}}),t.qrCodeLink?n("div",[n("qrCodeReport",{attrs:{isFixed:!0,qrCodeLink:t.qrCodeLink}})],1):n("div",[n("pubButton",{attrs:{title:"生成报告",isFixed:!0},on:{buttonConfirm:t.pushCarOwner}})],1)],1):t._e()},s=[],i=n("87d9"),r=n("e17b"),l=n("a7f8"),c=n("6aa7"),u=n("e62a"),d=n("97a4"),f=n("cf45"),p=n("9ef6"),h={components:{headerOne:i["a"],vehicleReportTemplate:c["a"],pubButton:u["a"],qrCodeReport:d["a"]},data:function(){return{billId:"",qrCodeLink:"",selectBtnName:[],codeList:{bodywk:"外观内饰",light:"灯光系统",elect:"车载电脑",supply:"供电系统",driver:"传动系统",cold:"空调系统",engine:"发动机系统",chas:"底盘系统",brake:"制动系统"},data:{},sysInfo:[],report:{},baseInfo:{},scoreCondition:{},makeResult:"",maintainScheme:{},ready:!1,leftText:"",adList:{}}},created:function(){},mounted:function(){a=this,window.appToH5=function(){a.getReportById(a.billId)};var t=this.$route.query;t&&(this.billId=t.billId,this.billId&&this.getReportById(this.billId)),p["a"].androidPhysicalBackButtonHandle(),Object(f["h"])().jnsAppStep&&"J008_report_h5"==Object(f["h"])().jnsAppStep?this.leftText="返回检测工单":this.leftText=""},methods:{reportShare:function(){var t={shareUrl:this.qrCodeLink,title:this.report.title,subtitle:this.baseInfo.car_model_full_name,logo:Object(f["e"])(this.baseInfo.car_icon),bill_id:this.billId,sms:1,bill_type:"J008"};r["a"].h5ToApp("share",t)},back:function(){""!=this.leftText?this.$router.back():r["a"].back()},remakeMaintenance:function(t){for(var e=[],n=0;n<t.length;n++){for(var a={labor:[],parts:[],consumable:[],labor_total:t[n].maintenanceTotal,consumable_total:t[n].suppliesTotal,parts_total:t[n].partsTotal,total_price:t[n].total,price_ssss:t[n].referencePrice4s,quality_desc:t[n].qualityTime},o=0;o<t[n].parts.length;o++)1==t[n].parts[o].partType?a.parts.push({part_brand:t[n].parts[o].brand,part_name:t[n].parts[o].name,subtotal:t[n].parts[o].subtotal,status:t[n].parts[o].status}):a.consumable.push({consumable_brand:t[n].parts[o].brand,consumable_name:t[n].parts[o].name,subtotal:t[n].parts[o].subtotal,status:t[n].parts[o].status});for(var s=0;s<t[n].maintenanceMode.length;s++)a.labor.push({labor_name:t[n].maintenanceMode[s].maintenanceName,labor_price:t[n].maintenanceMode[s].maintenancePrice,status:t[n].maintenanceMode[s].status});e.push(a)}this.report.maintenance=e,this.maintainScheme=this.report.maintenance[0]},getReportById:function(t){var e=this;l["a"].getReportByBillId({billId:t}).then(function(t){2e4==t.code?(e.sysInfo=t.data.reportData.sysInfo,e.data=t.data,e.report=t.data.reportData,e.qrCodeLink=e.report.ownerReportUrl,e.remakeData(e.report.subSysInfo),e.remakeMaintenance(e.report.maintenance),e.selectBtnName=e.report.maintenance.length>1?["即时维修方式","预案维修方式"]:[],e.report.baseInfo.pic&&(e.report.baseInfo.pic=e.report.baseInfo.pic.split(",")),e.baseInfo=e.report.baseInfo,e.baseInfo.vin=e.report.baseInfo.carVinNo,e.baseInfo.car_icon=e.report.baseInfo.carBrandLogo,e.baseInfo.car_model_full_name=e.report.baseInfo.carMemo,e.scoreCondition.totalScore=e.report.baseInfo.totalScore,e.scoreCondition.orgName=e.report.baseInfo.orgName,e.scoreCondition.techNumber=e.report.baseInfo.techNumber,e.scoreCondition.createUserName=e.report.baseInfo.createUserName,e.scoreCondition.detectionTime=e.report.baseInfo.detectionTime,e.makeResult=e.report.makeResult,e.sysInfo=e.report.sysInfo,e.ready=!0):e.$toast.fail(t.msg)})},remakeData:function(t){for(var e=0;e<this.sysInfo.length;e++)for(var n in this.sysInfo[e].title="",this.sysInfo[e].more=!1,this.sysInfo[e].faultNum=0,this.codeList)this.sysInfo[e].code===n&&(this.sysInfo[e].title=this.codeList[n]);var a={subSysInfo:[],status:"e",code:"supply",title:"供电系统",faultNum:0};this.sysInfo.forEach(function(e){e.subSysInfo=[],t.forEach(function(t){if(-1!=t.code.indexOf(e.code+"_")){if("elect"==e.code&&("elect_batteryVoltage"==t.code||"elect_generatingVoltage"==t.code||"elect_batteryPerf"==t.code))return"e"==a.status&&"e"!=t.level?a.status=t.level:"e"!=t.level&&1!=t.level?a.status=t.level:0==a.status&&0!=t.level&&"e"!=t.level&&1!=t.level?a.status=t.level:2==a.status&&"e"!=t.level&&1!=t.level&&0!=t.level&&2!=t.level&&(a.status=t.level),a.subSysInfo.push(t),!0;e.subSysInfo.push(t)}})}),this.sysInfo.push(a);for(e=0;e<this.sysInfo.length;e++)for(n=0;n<this.sysInfo[e].subSysInfo.length;n++)"1"!==this.sysInfo[e].subSysInfo[n].level&&"e"!==this.sysInfo[e].subSysInfo[n].level&&(this.sysInfo[e].faultNum+=1),this.sysInfo[e].faultNum>0&&(this.sysInfo[e].more=!0)},pushCarOwner:function(){var t={bill_id:this.billId,bill_type:"J008"};r["a"].h5ToApp("payOrder",t)},showQrCode:function(){}}},b=h,m=(n("4267"),n("2877")),y=Object(m["a"])(b,o,s,!1,null,"d98a386c",null);e["default"]=y.exports},"37e7":function(t,e,n){},4267:function(t,e,n){"use strict";var a=n("37e7"),o=n.n(a);o.a},"87d9":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-one"},[n("van-nav-bar",{class:{"clear-background":t.backgroundStatus,"border-bottom":t.isborderBottom},attrs:{"z-index":999,fixed:t.isFixed,border:!0,title:t.title,"left-text":t.leftText,"right-text":t.rightText,"left-arrow":t.leftArrow},on:{"click-left":function(e){return t.onClickLeft()},"click-right":t.onClickRight}},["icon"==t.rightText?n("van-icon",{staticClass:"icon-right",attrs:{slot:"right",color:"#000",name:t.iconName},slot:"right"}):t._e()],1),n("van-row",{class:{"header-fixed-margin":t.isFixed,"header-fixed-margin-hide":!t.isFixed}})],1)},o=[],s=(n("c3a6"),n("ad06")),i=(n("68ef"),n("8a0b"),n("2638")),r=n.n(i),l=n("a142"),c=n("ba31"),u=Object(l["j"])("nav-bar"),d=u[0],f=u[1];function p(t,e,n,a){return t("div",r()([{class:[f({fixed:e.fixed}),{"van-hairline--bottom":e.border}],style:{zIndex:e.zIndex}},Object(c["b"])(a)]),[t("div",{class:f("left"),on:{click:a.listeners["click-left"]||l["h"]}},[n.left?n.left():[e.leftArrow&&t(s["a"],{class:f("arrow"),attrs:{name:"arrow-left"}}),e.leftText&&t("span",{class:f("text")},[e.leftText])]]),t("div",{class:[f("title"),"van-ellipsis"]},[n.title?n.title():e.title]),t("div",{class:f("right"),on:{click:a.listeners["click-right"]||l["h"]}},[n.right?n.right():e.rightText&&t("span",{class:f("text")},[e.rightText])])])}p.props={title:String,fixed:Boolean,leftText:String,rightText:String,leftArrow:Boolean,border:{type:Boolean,default:!0},zIndex:{type:Number,default:1}};var h,b=d(p),m=n("9ef6");function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v={name:"HeaderOne",data:function(){return{}},components:(h={},y(h,b.name,b),y(h,s["a"].name,s["a"]),h),props:{title:{type:String,default:""},isFixed:{type:Boolean,default:!1},backgroundStatus:{type:Boolean,default:!1},leftText:{type:String,default:""},rightText:{type:String,default:""},leftArrow:{type:Boolean,default:!0},onClickLeftStatus:{type:Boolean,default:!1},isborderBottom:{type:Boolean,default:!1},iconName:{type:String,default:"share"}},mounted:function(){},methods:{onClickLeft:function(){this.onClickLeftStatus?this.$emit("onClickLeft"):m["a"].handle()},onClickRight:function(){this.$emit("onClickRight")}}},g=v,I=(n("0622"),n("2877")),k=Object(I["a"])(g,a,o,!1,null,null,null);e["a"]=k.exports},"8a0b":function(t,e,n){},"97a4":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"main-container"},[n("div",{staticClass:"button-content",class:{buttonFixed:t.isFixed}},[n("van-button",{ref:"buttonSelector",style:t.styleButton,attrs:{"native-type":"button",type:"info",size:"large",block:!0},on:{click:t.qrCodeView}},[t._v("查看二维码")])],1),n("van-row",{class:{"bottom-fixed-hide":!t.isFixed},style:t.styleButtonFixed}),n("van-popup",{staticClass:"qr-code-canvas-popup",attrs:{"lazy-render":!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("canvas",{directives:[{name:"show",rawName:"v-show",value:1==t.show,expression:"show==true"}],staticClass:"qr-code-canvas",attrs:{id:"qrCodeCanvas"}})])],1)])},o=[],s=n("d055"),i=n.n(s),r={name:"qrCodeReport",data:function(){return{show:!1,styleButton:{},styleButtonFixed:{}}},props:{qrCodeLink:{type:String,default:""},background:{type:String,default:"#46aef7"},isFixed:{type:Boolean,default:!1}},mounted:function(){this.init(),this.styleButtonHandle(),this.useQrcode()},methods:{init:function(){var t=this.$refs.buttonSelector.offsetHeight+10;this.styleButtonFixed={height:t+"px"}},qrCodeView:function(){this.show?this.show=!1:this.show=!0},useQrcode:function(){var t=this,e=document.getElementById("qrCodeCanvas");i.a.toCanvas(e,t.qrCodeLink||"",{width:180,margin:1},function(t){})},styleButtonHandle:function(){this.styleButton={"background-color":this.background,border:"1px solid"+this.background}}}},l=r,c=(n("1354"),n("2877")),u=Object(c["a"])(l,a,o,!1,null,"022bfa90",null);e["a"]=u.exports},a7f8:function(t,e,n){"use strict";var a=n("b775");e["a"]={getBillDetail:function(t){return a["a"].post("/Bill/Report/getReportByJ005",{billId:t})},getReportByBillIdV2:function(t){return a["a"].post("/Bill/Report/getReportByBillIdV2",{billId:t})},getReportByBillIdV3:function(t){return a["a"].post("/Bill/Report/getReportByBillIdV3",{bill_id:t})},getReportByBillId:function(t){return a["a"].post("/Bill/Report/getReportByBillId",t)}}},be18:function(t,e,n){}}]);