(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ce35f20"],{"1e18":function(t,e,a){"use strict";var i=a("b775");function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(a,!0).forEach(function(e){n(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}e["a"]={wxLogin:function(){var t={vtrId:"92842e5e0a2ab9bdc291e1998e7d33bf"};return i["a"].post("/CarOwner/Guest/wxLogin",t)},wxuserInfo:function(t){return t=r({vtrId:"92842e5e0a2ab9bdc291e1998e7d33bf"},t),i["a"].post("/CarOwner/Guest/wxuserInfo",t)},getCarInfoByVin:function(t){return i["a"].post("/CarOwner/Guest/getCarInfoByVin",t)},getCarBrandList:function(){return i["a"].post("/CarOwner/Guest/getCarBrandList")},getCarLineList:function(t){return i["a"].post("/CarOwner/Guest/getCarLineList",{brandId:t})},getExtendWarrantyDetail:function(t){return i["a"].post("/CarOwner/Guest/getExtendWarrantyDetail",t)},updateExtendWarrantyPrice:function(t){return i["a"].post("/CarOwner/Guest/updateExtendWarrantyPrice",t)},extendWarrantyPay:function(t){return i["a"].post("/CarOwner/Guest/extendWarrantyPay",t)},billCarBrandList:function(t){return i["a"].post("/Bill/CreateNew/getCarBrandList",t)},billCarLineList:function(t){return i["a"].post("/Bill/CreateNew/getCarLineList",t)}}},"2fe4":function(t,e,a){"use strict";var i=a("ff1e"),s=a.n(i);s.a},c3d8:function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"page"},[a("div",{staticClass:"main-container"},[a("background"),t.adList.C00009&&t.adList.C00009.length>0?a("div",{staticClass:"bannerPic"},[a("div",[t.adList.C00009[t.setTimeoutVal[0]].ad_link?a("a",{attrs:{href:t.adList.C00009[t.setTimeoutVal[0]].ad_link,target:"_blank"},on:{click:function(e){return t.addClickLog(t.adList.C00009[t.setTimeoutVal[0]],t.adList.C00009[0].loc_id)}}}):t._e(),a("img",{staticClass:"bannerPicImg",attrs:{src:t.adList.C00009[t.setTimeoutVal[0]].pic}})])]):t._e(),a("extendWarrantyInfoTemplate",{attrs:{baseInfo:t.baseInfo,report:t.report,makeResult:t.makeResult,maintainScheme:t.maintainScheme}}),"-1"==t.data.payStatus?a("div",{staticClass:"system"},[a("div",{staticClass:"title"},[t._m(0),a("div",{staticClass:"t2"},[a("div",{staticClass:"left"},[a("img",{attrs:{src:t.icon}})]),a("div",{staticClass:"right"},[a("div",[t._v("维修后系统质保一年")]),a("div",[t._v(t._s(t.report.insuredSystemTips))])])])]),a("div",{staticClass:"content"},t._l(t.qualityWarranty.extended_warranty,function(e,i){return a("div",{key:i,staticClass:"box"},[a("van-checkbox-group",{model:{value:t.warrantyList,callback:function(e){t.warrantyList=e},expression:"warrantyList"}},[e.child_system.length>0?a("div",[a("van-row",[a("van-col",{attrs:{span:"16"}},[a("h5",[t._v(t._s(e.system_name))])]),!e.child_system.length>0?a("van-col",{staticClass:"text-right",attrs:{span:"8"}},[t._v(t._s(e.price)+" 元")]):t._e()],1)],1):a("div",[a("van-checkbox",{staticClass:"list special",attrs:{name:e}},[a("h5",[t._v(t._s(e.system_name))]),0!=e.price?a("span",[t._v(t._s(e.price)+" 元")]):t._e()])],1),t._l(e.child_system,function(e,i){return a("van-checkbox",{key:i,staticClass:"list",attrs:{name:e}},[t._v("\n                            "+t._s(e.system_name)+"\n                            "),0!=e.price?a("span",[t._v(t._s(e.price)+" 元")]):t._e()])})],2)],1)}),0)]):a("div",[a("warrantyService",{attrs:{qualityWarranty:t.qualityWarranty,reportType:"carOwner",insuredSystemTips:t.report.insuredSystemTips}})],1),a("div",{staticClass:"feeTotal"},[a("h5",[t._v("费用总计")]),a("ul",{staticClass:"list-content"},[a("li",[a("van-row",[a("van-col",{attrs:{span:"16"}},[t._v("维修费")]),a("van-col",{staticClass:"text-right",attrs:{span:"8"}},[t.qualityWarranty.shop_price?a("span",[t._v(t._s(t.qualityWarranty.shop_price)+" 元")]):a("span",[t._v("-")])])],1)],1),a("li",[a("van-row",[a("van-col",{attrs:{span:"16"}},[t._v("服务费")]),a("van-col",{staticClass:"text-right",attrs:{span:"8"}},[t.qualityWarranty.system_total_price?a("span",[t._v(t._s(t.qualityWarranty.system_total_price.toFixed(2))+" 元")]):a("span",[t._v("-")])])],1)],1),a("li",[a("van-row",[a("van-col",{attrs:{span:"16"}},[t._v("合计")]),a("van-col",{staticClass:"text-right",attrs:{span:"8"}},[t.qualityWarranty.total_price?a("span",[t._v(t._s(t.qualityWarranty.total_price.toFixed(2))+" 元")]):a("span",[t._v("-")])])],1)],1)])]),a("div",{staticClass:"priceTotal"},[a("span",[t._v("4S店维修参考价")]),a("div",{staticClass:"total_text"},[a("span",[t._v(t._s(t.qualityWarranty.ssss_price)+" 元")])])]),"-1"==t.data.payStatus&&t.warrantyList.length>0?a("pubButton",{attrs:{title:"微信支付 ￥"+t.playPrice.toFixed(2),isFixed:!1},on:{buttonConfirm:t.play}}):t._e(),"1"==t.data.payStatus?a("pubButton",{attrs:{title:"查看服务协议",isFixed:!1},on:{buttonConfirm:function(e){return t.goAgreement()}}}):t._e(),t.adList.C00010&&t.adList.C00010.length>0?a("div",{staticClass:"bannerPic",staticStyle:{"padding-top":"15px"}},[a("div",[t.adList.C00010[t.setTimeoutVal[1]].ad_link?a("a",{attrs:{href:t.adList.C00010[t.setTimeoutVal[1]].ad_link,target:"_blank"},on:{click:function(e){return t.addClickLog(t.adList.C00010[t.setTimeoutVal[1]],t.adList.C00010[0].loc_id)}}}):t._e(),a("img",{staticClass:"bannerPicImg",attrs:{src:t.adList.C00010[t.setTimeoutVal[1]].pic}})])]):t._e()],1)]):t._e()},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t1"},[a("h4",[t._v("请选择承保系统")])])}],n=(a("a909"),a("3acc")),o=(a("3c32"),a("417e")),c=(a("e17b"),a("1e18")),l=a("0d27"),d=(a("cf45"),a("e62a")),u=a("7267"),p=a("c8ce"),m=a("6e63"),y=a("688f");function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f={components:(i={extendWarrantyInfoTemplate:l["a"]},h(i,o["a"].name,o["a"]),h(i,n["a"].name,n["a"]),h(i,"pubButton",d["a"]),h(i,"background",u["a"]),h(i,"warrantyService",p["a"]),h(i,"tabLink",m["a"]),i),data:function(){return{icon:a("bc9a"),code:"",qrCodeLink:"",data:{},report:{},baseInfo:{},makeResult:"",maintainScheme:{},ready:!1,leftText:"",warrantyList:[],qualityWarranty:{},totalPrice:{maintainPrice:"",servicePrice:"",referencePrice4s:""},playPrice:0,tabList:[],adList:{},adData:{loc_id:["C00009","C00010"],code:""},adMark:0,setTimeoutVal:[]}},created:function(){},mounted:function(){var t=this.$route.query;t&&(this.code=t.code,this.code&&this.getExtendWarrantyDetail(this.code))},methods:{vinEncode:function(t){return t.substring(0,4)+"*****"+t.substring(t.length-4)},remakeMaintenance:function(t){for(var e=[],a={labor:[],parts:[],consumable:[],labor_total:t.maintenanceTotal,consumable_total:t.suppliesTotal,parts_total:t.partsTotal,total_price:t.total,quality_desc:DataTransfer.qualityTime},i=0;i<t.parts.length;i++)1==t.parts[i].partType?a.parts.push({part_brand:t.parts[i].brand,part_name:t.parts[i].name,subtotal:t.parts[i].subtotal,status:t.parts[i].status}):a.consumable.push({consumable_brand:t.parts[i].brand,consumable_name:t.parts[i].name,subtotal:t.parts[i].subtotal,status:t.parts[i].status});for(var s=0;s<t.maintenanceMode.length;s++)a.labor.push({labor_name:t.maintenanceMode[s].maintenanceName,labor_price:t.maintenanceMode[s].maintenancePrice,status:t.maintenanceMode[s].status});e.push(a),this.report.maintenance=e,this.maintainScheme=this.report.maintenance[0]},remakeWarrantyData:function(t){for(var e={extended_warranty:[],system_total_price:t.systemTotalPrice,shop_price:t.shopPrice,ssss_price:t.SSSSPrice,total_price:t.totalPrice},a=0;a<t.systemList.length;a++)if(t.systemList[a]){var i="1"==t.systemList[a].status?"1":"0",s=[];e.extended_warranty.push({system_id:t.systemList[a].maintenancePackageListRelationId,check:i,price:t.systemList[a].price,guide_price:"0",system_name:t.systemList[a].pidSystemName,child_system:s});for(var r=0;r<t.systemList[a].childSystemList.length;r++)if(t.systemList[a].childSystemList[r]){var n="1"==t.systemList[a].childSystemList[r].status?"1":"0";s.push({system_id:t.systemList[a].childSystemList[r].maintenancePackageListRelationId,check:n,price:t.systemList[a].childSystemList[r].price,guide_price:"0",system_name:t.systemList[a].childSystemList[r].maintenanceSystemName})}}this.qualityWarranty=e,this.traverseSelectedItem()},traverseSelectedItem:function(){for(var t=this.qualityWarranty.extended_warranty,e=0;e<t.length;e++){"1"==t[e].check&&this.warrantyList.push(t[e]);for(var a=0;a<t[e].child_system.length;a++)"1"==t[e].child_system[a].check&&this.warrantyList.push(t[e].child_system[a])}this.playPrice=Number(this.qualityWarranty.shop_price)},getExtendWarrantyDetail:function(t){var e=this;c["a"].getExtendWarrantyDetail({code:t}).then(function(t){2e4==t.code?(e.data=t.data,e.report=t.data.reportData,e.remakeMaintenance(e.report.maintenance),e.remakeWarrantyData(e.data),e.getCheckResult(),e.report.baseInfo.pic&&(e.report.baseInfo.pic=e.report.baseInfo.pic.split(",")),e.baseInfo=e.report.baseInfo,e.baseInfo.vin=e.report.baseInfo.carVinNo,e.baseInfo.car_icon=e.report.baseInfo.carBrandLogo,e.baseInfo.car_model_full_name=e.report.baseInfo.carMemo,e.baseInfo.vin=e.vinEncode(e.baseInfo.carVinNo),e.totalPrice.maintainPrice=e.report.maintenance[0].total_price,e.remakeTabList(),e.adData.code=e.data.reportCode,e.getAdList()):e.$toast.fail(t.msg)})},getCheckResult:function(){var t=this;this.report.subSysInfo.forEach(function(e){if("cold_temperature"==e.code&&e.detectionResult)return t.makeResult+=e.detectionResult+"<br>",!0;"e"!=e.level&&"1"!=e.level&&(t.makeResult+=e.detectionResult+"<br>")})},getQualityWarrantyScheme:function(t){var e=this;undisposedApi.getQualityWarrantyScheme({billId:billId}).then(function(t){if(2e4==t.code)for(var a=t.data.quality_warranty,i=0;i<a.length;i++)"maintenance_system_protection"==a[i].code&&(e.warrantyScheme=a[i],e.totalPrice.servicePrice=a[i].price);else e.$toast.fail(t.msg)})},play:function(){for(var t=this,e=[],a=0;a<this.warrantyList.length;a++)e.push(this.warrantyList[a].system_id);var i={blockPolicyCode:this.data.blockPolicyCode,relation_id_list:e};c["a"].updateExtendWarrantyPrice(i).then(function(e){2e4==e.code?t.extendWarrantyPay():t.$toast.fail(e.msg)})},goAgreement:function(){window.location.href="https://www.wanguoqiche.com/owner/warranty_details.html?code="+this.code},extendWarrantyPay:function(){var t=this,e=this.playPrice,a={blockPolicyCode:this.data.blockPolicyCode,price:e.toFixed(2)};c["a"].extendWarrantyPay(a).then(function(e){30100==e.code?window.location.href=e.data.url:2e4==e.code?t.getExtendWarrantyDetail(t.code):t.$toast.fail(e.msg)})},remakeTabList:function(){if(this.report.baseInfo){var t={name:"基本信息",id:"reportBaseInfo"};this.tabList.push(t)}if(this.makeResult){t={name:"诊断结果",id:"reportResultList"};this.tabList.push(t)}if(this.report.maintenance){t={name:"维修项目",id:"reportMaintainScheme"};this.tabList.push(t)}},tabChanges:function(t){this.$nextTick(function(){var e=document.querySelector("#"+t).offsetTop-50;window.scrollTo(0,e)})},getAdList:function(){var t=this;if(this.adMark!=this.adData.loc_id.length){var e={loc_id:this.adData.loc_id[this.adMark],report_code:this.adData.code};y["a"].getAdList(e).then(function(e){2e4==e.code?(t.adList[t.adData.loc_id[t.adMark]]=e.data.list,t.adMark+=1,t.getAdList()):t.$toast.fail(e.msg)})}else{this.ready=!0;for(var a=Object.keys(this.adList),i=0;i<a.length;i++){var s=0;this.setTimeoutVal.push(s)}this.adList&&a.length>0&&(this.setTimeoutFun1(),this.setTimeoutFun2())}},setTimeoutFun1:function(){var t=this;setTimeout(function(){t.setTimeoutVal[0]!=t.adList.C00009.length-1?t.$set(t.setTimeoutVal,0,t.setTimeoutVal[0]+1):t.$set(t.setTimeoutVal,0,0),t.setTimeoutFun1()},2e3)},setTimeoutFun2:function(){var t=this;setTimeout(function(){t.setTimeoutVal[1]!=t.adList.C00010.length-1?t.$set(t.setTimeoutVal,1,t.setTimeoutVal[1]+1):t.$set(t.setTimeoutVal,1,0),t.setTimeoutFun2()},2e3)},addClickLog:function(t,e){var a=this,i={ad_id:t.loc_id,ad_position_id:e,report_id:this.adData.code};y["a"].addClickLog(i).then(function(t){2e4==t.code||a.$toast.fail(t.msg)})}},watch:{warrantyList:{handler:function(t,e){this.playPrice=Number(this.qualityWarranty.shop_price);for(var a=0,i=0;i<t.length;i++)a+=Number(t[i].price);this.qualityWarranty.system_total_price=a,this.playPrice+=a,this.qualityWarranty.total_price=this.playPrice},deep:!0}}},_=f,b=(a("2fe4"),a("2877")),v=Object(b["a"])(_,s,r,!1,null,"fb814c76",null);e["default"]=v.exports},ff1e:function(t,e,a){}}]);