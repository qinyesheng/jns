(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-693a2388"],{"0622":function(t,e,a){"use strict";var n=a("be18"),i=a.n(n);i.a},1354:function(t,e,a){"use strict";var n=a("305e"),i=a.n(n);i.a},"305e":function(t,e,a){},"849d":function(t,e,a){"use strict";var n=a("b775");e["a"]={changeRepair:function(t){return n["a"].post("/Bill/Undisposed/changeRepair",t)},getBIllCertificate:function(t){return n["a"].post("/Bill/Undisposed/getBIllCertificate",t)},saveBillCertificate:function(t){return n["a"].post("/Bill/undisposed/saveBillCertificate",t)},getBillDetail:function(t){return n["a"].post("/Bill/Undisposed/getBillDetail",t)},getExtendedWarrantyPackageList:function(t){return n["a"].post("/Bill/Undisposed/getExtendedWarrantyPackageList",t)}}},"87d9":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-one"},[a("van-nav-bar",{class:{"clear-background":t.backgroundStatus,"border-bottom":t.isborderBottom},attrs:{"z-index":999,fixed:t.isFixed,border:!0,title:t.title,"left-text":t.leftText,"right-text":t.rightText,"left-arrow":t.leftArrow},on:{"click-left":function(e){return t.onClickLeft()},"click-right":t.onClickRight}},["icon"==t.rightText?a("van-icon",{staticClass:"icon-right",attrs:{slot:"right",color:"#000",name:t.iconName},slot:"right"}):t._e()],1),a("van-row",{class:{"header-fixed-margin":t.isFixed,"header-fixed-margin-hide":!t.isFixed}})],1)},i=[],r=(a("c3a6"),a("ad06")),s=(a("68ef"),a("8a0b"),a("2638")),o=a.n(s),l=a("a142"),c=a("ba31"),d=Object(l["j"])("nav-bar"),u=d[0],p=d[1];function f(t,e,a,n){return t("div",o()([{class:[p({fixed:e.fixed}),{"van-hairline--bottom":e.border}],style:{zIndex:e.zIndex}},Object(c["b"])(n)]),[t("div",{class:p("left"),on:{click:n.listeners["click-left"]||l["h"]}},[a.left?a.left():[e.leftArrow&&t(r["a"],{class:p("arrow"),attrs:{name:"arrow-left"}}),e.leftText&&t("span",{class:p("text")},[e.leftText])]]),t("div",{class:[p("title"),"van-ellipsis"]},[a.title?a.title():e.title]),t("div",{class:p("right"),on:{click:n.listeners["click-right"]||l["h"]}},[a.right?a.right():e.rightText&&t("span",{class:p("text")},[e.rightText])])])}f.props={title:String,fixed:Boolean,leftText:String,rightText:String,leftArrow:Boolean,border:{type:Boolean,default:!0},zIndex:{type:Number,default:1}};var h,b=u(f),m=a("9ef6");function v(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var g={name:"HeaderOne",data:function(){return{}},components:(h={},v(h,b.name,b),v(h,r["a"].name,r["a"]),h),props:{title:{type:String,default:""},isFixed:{type:Boolean,default:!1},backgroundStatus:{type:Boolean,default:!1},leftText:{type:String,default:""},rightText:{type:String,default:""},leftArrow:{type:Boolean,default:!0},onClickLeftStatus:{type:Boolean,default:!1},isborderBottom:{type:Boolean,default:!1},iconName:{type:String,default:"share"}},mounted:function(){},methods:{onClickLeft:function(){this.onClickLeftStatus?this.$emit("onClickLeft"):m["a"].handle()},onClickRight:function(){this.$emit("onClickRight")}}},y=g,_=(a("0622"),a("2877")),k=Object(_["a"])(y,n,i,!1,null,null,null);e["a"]=k.exports},"8a0b":function(t,e,a){},"97a4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"main-container"},[a("div",{staticClass:"button-content",class:{buttonFixed:t.isFixed}},[a("van-button",{ref:"buttonSelector",style:t.styleButton,attrs:{"native-type":"button",type:"info",size:"large",block:!0},on:{click:t.qrCodeView}},[t._v("查看二维码")])],1),a("van-row",{class:{"bottom-fixed-hide":!t.isFixed},style:t.styleButtonFixed}),a("van-popup",{staticClass:"qr-code-canvas-popup",attrs:{"lazy-render":!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("canvas",{directives:[{name:"show",rawName:"v-show",value:1==t.show,expression:"show==true"}],staticClass:"qr-code-canvas",attrs:{id:"qrCodeCanvas"}})])],1)])},i=[],r=a("d055"),s=a.n(r),o={name:"qrCodeReport",data:function(){return{show:!1,styleButton:{},styleButtonFixed:{}}},props:{qrCodeLink:{type:String,default:""},background:{type:String,default:"#46aef7"},isFixed:{type:Boolean,default:!1}},mounted:function(){this.init(),this.styleButtonHandle(),this.useQrcode()},methods:{init:function(){var t=this.$refs.buttonSelector.offsetHeight+10;this.styleButtonFixed={height:t+"px"}},qrCodeView:function(){this.show?this.show=!1:this.show=!0},useQrcode:function(){var t=this,e=document.getElementById("qrCodeCanvas");s.a.toCanvas(e,t.qrCodeLink||"",{width:180,margin:1},function(t){})},styleButtonHandle:function(){this.styleButton={"background-color":this.background,border:"1px solid"+this.background}}}},l=o,c=(a("1354"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,"022bfa90",null);e["a"]=d.exports},a56a:function(t,e,a){"use strict";var n=a("af96"),i=a.n(n);i.a},af96:function(t,e,a){},be18:function(t,e,a){},c694:function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.ready?a("div",{staticClass:"page"},[a("background"),a("headerOne",{attrs:{title:t.$route.meta.title,isFixed:!0,backgroundStatus:!0,leftText:t.leftText,rightText:t.qrCodeLink?"分享":"",onClickLeftStatus:!0},on:{onClickLeft:t.back,onClickRight:t.reportShare}}),a("tabLink",{attrs:{tabList:t.tabList,flexTop:45},on:{tabChange:t.tabChanges}}),a("div",{staticClass:"main-container"},[a("extendWarrantyInfoTemplate",{attrs:{baseInfo:t.baseInfo,report:t.report,makeResult:t.makeResult,maintainScheme:t.maintainScheme}}),a("warrantyService",{attrs:{qualityWarranty:t.qualityWarranty,reportType:t.reportType}}),a("div",{staticClass:"feeTotal",attrs:{id:"test1"}},[a("h5",[t._v("费用总计")]),a("ul",{staticClass:"list-content"},[a("li",[a("van-row",[a("van-col",{attrs:{span:"16"}},[t._v("维修费")]),a("van-col",{staticClass:"text-right",attrs:{span:"8"}},[t.qualityWarranty.shop_price?a("span",[t._v(t._s(t.qualityWarranty.shop_price)+" 元")]):a("span",[t._v("-")])])],1)],1),a("li",[a("van-row",[a("van-col",{attrs:{span:"16"}},[t._v("服务费")]),a("van-col",{staticClass:"text-right",attrs:{span:"8"}},[t.qualityWarranty.system_total_price?a("span",[t._v(t._s(t.qualityWarranty.system_total_price)+" 元")]):a("span",[t._v("-")])])],1)],1),a("li",[a("van-row",[a("van-col",{attrs:{span:"16"}},[t._v("合计")]),a("van-col",{staticClass:"text-right",attrs:{span:"8"}},[t.qualityWarranty.total_price?a("span",[t._v(t._s(t.qualityWarranty.total_price)+" 元")]):a("span",[t._v("-")])])],1)],1)])]),a("div",{staticClass:"priceTotal"},[a("span",[t._v("4S店维修参考价")]),a("div",{staticClass:"total_text"},[a("span",[t._v(t._s(t.qualityWarranty.ssss_price)+" 元")])])]),t.qrCodeLink?a("div",[a("qrCodeReport",{attrs:{isFixed:!0,qrCodeLink:t.qrCodeLink}})],1):a("div",[a("pubButton",{attrs:{title:"生成报告",isFixed:!0},on:{buttonConfirm:t.pushCarOwner}})],1)],1)],1):t._e()},r=[],s=a("87d9"),o=a("e17b"),l=a("849d"),c=a("0d27"),d=a("e62a"),u=a("97a4"),p=a("cf45"),f=a("9ef6"),h=a("7267"),b=a("c8ce"),m=a("6e63"),v={components:{headerOne:s["a"],extendWarrantyInfoTemplate:c["a"],pubButton:d["a"],qrCodeReport:u["a"],background:h["a"],warrantyService:b["a"],tabLink:m["a"]},data:function(){return{bill_id:"",qrCodeLink:"",data:{},report:{},baseInfo:{},makeResult:"",maintainScheme:{},ready:!1,leftText:"",qualityWarranty:{},totalPrice:{maintainPrice:"",servicePrice:"",referencePrice4s:""},reportType:"bill",tabList:[]}},created:function(){},mounted:function(){n=this,window.appToH5=function(){n.getHistoryBillDetail(n.bill_id),n.getExtendedWarrantyPackageList(n.bill_id)};var t=Object(p["h"])();t&&(this.bill_id=t.bill_id,this.bill_id&&(this.getHistoryBillDetail(this.bill_id),this.getExtendedWarrantyPackageList(this.bill_id))),f["a"].androidPhysicalBackButtonHandle(),Object(p["h"])().jnsAppStep&&"Y002_report_h5"==Object(p["h"])().jnsAppStep?this.leftText="返回检测工单":this.leftText=""},methods:{reportShare:function(){var t={shareUrl:this.qrCodeLink,title:this.report.title,subtitle:this.baseInfo.car_model_full_name,logo:Object(p["e"])(this.baseInfo.car_icon),bill_id:this.bill_id,sms:1,bill_type:"Y002"};o["a"].h5ToApp("share",t)},back:function(){""!=this.leftText?this.$router.back():o["a"].back()},remakeMaintenance:function(t){for(var e=[],a={labor:[],parts:[],consumable:[],labor_total:t.maintenanceTotal,consumable_total:t.suppliesTotal,parts_total:t.partsTotal,total_price:t.total,quality_desc:DataTransfer.qualityTime},n=0;n<t.parts.length;n++)1==t.parts[n].partType?a.parts.push({part_brand:t.parts[n].brand,part_name:t.parts[n].name,subtotal:t.parts[n].subtotal,status:t.parts[n].status}):a.consumable.push({consumable_brand:t.parts[n].brand,consumable_name:t.parts[n].name,subtotal:t.parts[n].subtotal,status:t.parts[n].status});for(var i=0;i<t.maintenanceMode.length;i++)a.labor.push({labor_name:t.maintenanceMode[i].maintenanceName,labor_price:t.maintenanceMode[i].maintenancePrice,status:t.maintenanceMode[i].status});e.push(a),this.report.maintenance=e,this.maintainScheme=this.report.maintenance[0]},getHistoryBillDetail:function(t){var e=this;l["a"].getBillDetail({billId:t}).then(function(t){2e4==t.code?(e.data=t.data,e.report=t.data.reportData,e.qrCodeLink=t.data.warrantyOwnerSmsUrl?t.data.warrantyOwnerSmsUrl:"",e.remakeMaintenance(e.report.maintenance),e.getCheckResult(),e.report.baseInfo.pic&&(e.report.baseInfo.pic=e.report.baseInfo.pic.split(",")),e.baseInfo=e.report.baseInfo,e.baseInfo.vin=e.report.baseInfo.carVinNo,e.baseInfo.car_icon=e.report.baseInfo.carBrandLogo,e.baseInfo.car_model_full_name=e.report.baseInfo.carMemo,e.totalPrice.maintainPrice=e.report.maintenance[0].total_price,e.remakeTabList(),e.ready=!0):e.$toast.fail(t.msg)})},pushCarOwner:function(){var t={bill_id:this.bill_id,bill_type:"Y002"};o["a"].h5ToApp("payOrder",t)},showQrCode:function(){},getCheckResult:function(){var t=this;this.report.subSysInfo.forEach(function(e){if("cold_temperature"==e.code&&e.detectionResult)return t.makeResult+=e.detectionResult+"<br>",!0;"e"!=e.level&&"1"!=e.level&&(t.makeResult+=e.detectionResult+"<br>")})},getExtendedWarrantyPackageList:function(t){var e=this;l["a"].getExtendedWarrantyPackageList({bill_id:t}).then(function(t){2e4==t.code?e.qualityWarranty=t.data:e.$toast.fail(t.msg)})},remakeTabList:function(){if(this.data.baseInfo){var t={name:"基本信息",id:"reportBaseInfo"};this.tabList.push(t)}if(this.data.checkResultArr){t={name:"诊断结果",id:"reportResultList"};this.tabList.push(t)}if(this.report.maintenance){t={name:"维修项目",id:"reportMaintainScheme"};this.tabList.push(t)}},tabChanges:function(t){this.$nextTick(function(){var e=document.querySelector("#"+t).offsetTop-100;window.scrollTo(0,e)})}}},g=v,y=(a("a56a"),a("2877")),_=Object(y["a"])(g,i,r,!1,null,"589a33d7",null);e["default"]=_.exports}}]);