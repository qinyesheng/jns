(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-577ce78f"],{"0622":function(t,e,n){"use strict";var o=n("be18"),i=n.n(o);i.a},"39d1":function(t,e,n){"use strict";var o=n("2638"),i=n.n(o),a=n("a142"),c=n("ba31"),r=n("db78"),s=n("ad06"),l=Object(a["j"])("rate"),u=l[0],f=l[1];function d(t,e,n){return t>=e?"full":t+.5>=e&&n?"half":"void"}function p(t,e,n,o){for(var a=e.icon,l=e.size,u=e.color,p=e.voidIcon,h=e.readonly,b=e.disabled,v=e.voidColor,m=e.disabledColor,g=[],y=1;y<=e.count;y++)g.push(d(e.value,y,e.allowHalf));function w(t){b||h||(Object(c["a"])(o,"input",t),Object(c["a"])(o,"change",t))}function x(t){if(!h&&!b&&document.elementFromPoint){Object(r["c"])(t);var e=t.touches[0],n=e.clientX,o=e.clientY,i=document.elementFromPoint(n,o);if(i&&i.dataset){var a=i.dataset.score;a&&w(+a)}}}function C(n,o){var i="full"===n,c="void"===n;return t("div",{key:o,class:f("item")},[t(s["a"],{attrs:{name:i?a:p,size:l+"px","data-score":o+1,color:b?m:i?u:v},class:f("icon"),on:{click:function(){w(o+1)}}}),e.allowHalf&&t(s["a"],{attrs:{name:c?p:a,size:l+"px","data-score":o+.5,color:b?m:c?v:u},class:f("icon","half"),on:{click:function(){w(o+.5)}}})])}return t("div",i()([{class:f()},Object(c["b"])(o),{on:{touchmove:x}}]),[g.map(function(t,e){return C(t,e)})])}p.props={value:Number,readonly:Boolean,disabled:Boolean,allowHalf:Boolean,size:{type:Number,default:20},icon:{type:String,default:"star"},voidIcon:{type:String,default:"star-o"},color:{type:String,default:"#ffd21e"},voidColor:{type:String,default:"#c7c7c7"},disabledColor:{type:String,default:"#bdbdbd"},count:{type:Number,default:5}},e["a"]=u(p)},"3c34":function(t,e,n){"use strict";n.r(e);var o,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page ratePage"},[n("background"),n("headerOne",{attrs:{title:t.$route.meta.title,isFixed:!0,backgroundStatus:!0,onClickLeftStatus:!0},on:{onClickLeft:t.back}}),n("div",{staticClass:"main-container"},[n("div",{staticClass:"box"},[n("div",{staticClass:"title row"},[t._v("环境舒适度")]),n("div",{staticClass:"row evaluate"},[0==t.comfort?n("span"):1==t.comfort?n("span",[t._v('"差评"')]):2==t.comfort?n("span",[t._v('"合格"')]):3==t.comfort?n("span",[t._v('"一般"')]):4==t.comfort?n("span",[t._v('"满意"')]):5==t.comfort?n("span",[t._v('"好评"')]):t._e()]),n("div",{staticClass:"row"},[n("van-rate",{attrs:{readonly:0!=t.status,"void-icon":"star"},on:{change:t.selectComfortChange},model:{value:t.comfort,callback:function(e){t.comfort=e},expression:"comfort"}})],1)]),n("div",{staticClass:"box"},[n("div",{staticClass:"title row"},[t._v("技师专业度")]),n("div",{staticClass:"row evaluate"},[0==t.proficient?n("span"):1==t.proficient?n("span",[t._v('"差评"')]):2==t.proficient?n("span",[t._v('"合格"')]):3==t.proficient?n("span",[t._v('"一般"')]):4==t.proficient?n("span",[t._v('"满意"')]):5==t.proficient?n("span",[t._v('"好评"')]):t._e()]),n("div",{staticClass:"row"},[n("van-rate",{attrs:{readonly:0!=t.status,"void-icon":"star"},on:{change:t.selectProficientChange},model:{value:t.proficient,callback:function(e){t.proficient=e},expression:"proficient"}})],1)]),n("div",{staticClass:"box service"},[n("div",{staticClass:"title row"},[t._v("服务满意度")]),n("div",{staticClass:"row evaluate"},[0==t.satisfaction?n("span"):1==t.satisfaction?n("span",[t._v('"差评"')]):2==t.satisfaction?n("span",[t._v('"合格"')]):3==t.satisfaction?n("span",[t._v('"一般"')]):4==t.satisfaction?n("span",[t._v('"满意"')]):5==t.satisfaction?n("span",[t._v('"好评"')]):t._e()]),n("div",{staticClass:"row"},[n("van-rate",{attrs:{readonly:0!=t.status,"void-icon":"star"},on:{change:t.selectSatisfactionChange},model:{value:t.satisfaction,callback:function(e){t.satisfaction=e},expression:"satisfaction"}})],1),n("div",{staticClass:"title row",staticStyle:{"margin-top":"10px"}},[t._v("评价原因")]),n("div",{staticClass:"row cause"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"site",attrs:{rows:"6",placeholder:0==t.status?"输入内容":"暂无原因",readonly:0!=t.status},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),0==t.status?n("div",{staticClass:"text-right"},[t._v(t._s(this.contentMaxLength-this.content.length))]):t._e()])]),0==t.status?n("pubButton",{attrs:{title:"提交",isFixed:!0},on:{buttonConfirm:function(e){return t.rate()}}}):t._e()],1)],1)},a=[],c=(n("4142"),n("39d1")),r=n("87d9"),s=n("e62a"),l=n("7267"),u=n("b775"),f={getBillScoreInfo:function(t){return u["a"].post("/Common/BillScore/getBillScoreInfo",t)},saveBillScore:function(t){return u["a"].post("/Common/BillScore/saveBillScore",t)}};function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={components:(o={},d(o,c["a"].name,c["a"]),d(o,"pubButton",s["a"]),d(o,"background",l["a"]),d(o,"headerOne",r["a"]),o),data:function(){return{comfort:0,oldComfort:0,proficient:0,oldProficient:0,satisfaction:0,oldSatisfaction:0,content:"",contentMaxLength:300,data:{},reportType:"",code:"",status:0}},created:function(){},mounted:function(){var t=this.$route.query;t&&(this.code=t.code,this.code&&this.getBillScoreInfo(this.code),this.reportType=t.reportType)},methods:{rate:function(){this.saveBillScore()},getBillScoreInfo:function(t){var e=this;f.getBillScoreInfo({code:t}).then(function(t){if(2e4==t.code){var n=t.data;e.comfort=Number(n.star_a),e.proficient=Number(n.star_b),e.satisfaction=Number(n.star_c),e.content=n.descs?n.descs:"",e.status=n.status}else e.$toast.fail(t.msg)})},saveBillScore:function(t){var e=this,n={code:this.code,star_a:this.comfort,star_b:this.proficient,star_c:this.satisfaction,descs:this.content};f.saveBillScore(n).then(function(t){2e4==t.code?(e.$toast.fail("评价完成"),setTimeout(function(){if("J002"==e.reportType){var t="https://www.wanguoqiche.com/owner/carReport.html?code="+e.code;window.location.replace(t)}},1e3)):e.$toast.fail(t.msg)})},selectComfortChange:function(t){this.oldComfort==t&&(this.comfort=0)},selectProficientChange:function(t){this.oldProficient==t&&(this.proficient=0)},selectSatisfactionChange:function(t){this.oldSatisfaction==t&&(this.satisfaction=0)},back:function(){if("J002"==this.reportType){var t="https://www.wanguoqiche.com/owner/carReport.html?code="+this.code;window.location.replace(t)}}},watch:{comfort:function(t,e){this.oldComfort=t},proficient:function(t,e){this.oldProficient=t},satisfaction:function(t,e){this.oldSatisfaction=t},content:function(){this.content.length>this.contentMaxLength&&(this.content=String(this.content).slice(0,this.contentMaxLength))}}},h=p,b=(n("b60d"),n("2877")),v=Object(b["a"])(h,i,a,!1,null,"7310564c",null);e["default"]=v.exports},4142:function(t,e,n){"use strict";n("68ef"),n("8199")},"60b4":function(t,e,n){},7267:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"background",style:t.styleObject,attrs:{id:"pageBackground"}})])},i=[],a={data:function(){return{styleObject:{background:"#f2f2f2"}}},props:["background"],created:function(){},mounted:function(){this.init()},methods:{init:function(){this.background&&(this.styleObject.background=this.background)}}},c=a,r=(n("7dfe"),n("2877")),s=Object(r["a"])(c,o,i,!1,null,"76080968",null);e["a"]=s.exports},"7dfe":function(t,e,n){"use strict";var o=n("60b4"),i=n.n(o);i.a},8199:function(t,e,n){},"87d9":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header-one"},[n("van-nav-bar",{class:{"clear-background":t.backgroundStatus,"border-bottom":t.isborderBottom},attrs:{"z-index":999,fixed:t.isFixed,border:!0,title:t.title,"left-text":t.leftText,"right-text":t.rightText,"left-arrow":t.leftArrow},on:{"click-left":function(e){return t.onClickLeft()},"click-right":t.onClickRight}},["icon"==t.rightText?n("van-icon",{staticClass:"icon-right",attrs:{slot:"right",color:"#000",name:t.iconName},slot:"right"}):t._e()],1),n("van-row",{class:{"header-fixed-margin":t.isFixed,"header-fixed-margin-hide":!t.isFixed}})],1)},i=[],a=(n("c3a6"),n("ad06")),c=(n("68ef"),n("8a0b"),n("2638")),r=n.n(c),s=n("a142"),l=n("ba31"),u=Object(s["j"])("nav-bar"),f=u[0],d=u[1];function p(t,e,n,o){return t("div",r()([{class:[d({fixed:e.fixed}),{"van-hairline--bottom":e.border}],style:{zIndex:e.zIndex}},Object(l["b"])(o)]),[t("div",{class:d("left"),on:{click:o.listeners["click-left"]||s["h"]}},[n.left?n.left():[e.leftArrow&&t(a["a"],{class:d("arrow"),attrs:{name:"arrow-left"}}),e.leftText&&t("span",{class:d("text")},[e.leftText])]]),t("div",{class:[d("title"),"van-ellipsis"]},[n.title?n.title():e.title]),t("div",{class:d("right"),on:{click:o.listeners["click-right"]||s["h"]}},[n.right?n.right():e.rightText&&t("span",{class:d("text")},[e.rightText])])])}p.props={title:String,fixed:Boolean,leftText:String,rightText:String,leftArrow:Boolean,border:{type:Boolean,default:!0},zIndex:{type:Number,default:1}};var h,b=f(p),v=n("9ef6");function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={name:"HeaderOne",data:function(){return{}},components:(h={},m(h,b.name,b),m(h,a["a"].name,a["a"]),h),props:{title:{type:String,default:""},isFixed:{type:Boolean,default:!1},backgroundStatus:{type:Boolean,default:!1},leftText:{type:String,default:""},rightText:{type:String,default:""},leftArrow:{type:Boolean,default:!0},onClickLeftStatus:{type:Boolean,default:!1},isborderBottom:{type:Boolean,default:!1},iconName:{type:String,default:"share"}},mounted:function(){},methods:{onClickLeft:function(){this.onClickLeftStatus?this.$emit("onClickLeft"):v["a"].handle()},onClickRight:function(){this.$emit("onClickRight")}}},y=g,w=(n("0622"),n("2877")),x=Object(w["a"])(y,o,i,!1,null,null,null);e["a"]=x.exports},"8a0b":function(t,e,n){},b60d:function(t,e,n){"use strict";var o=n("dc72"),i=n.n(o);i.a},b775:function(t,e,n){"use strict";n("e7e5");var o=n("d399"),i=n("bc3a"),a=n.n(i),c=n("4328"),r=n.n(c),s=n("e17b"),l=n("5f87"),u=n("cf45"),f=a.a.create({baseURL:"https://api.wanguoqiche.com",timeout:5e3,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:[function(t){return t=r.a.stringify(t),t}]}),d={handle:function(t){Object(u["j"])()||!Object(l["a"])()?t&&t():setTimeout(function(){s["a"].backHome()},1e3)},40500:function(t){Object(o["a"])({type:"fail",message:t,duration:1e3}),this.handle()},40300:function(t){Object(o["a"])({type:"fail",message:t,duration:1e3}),this.handle()},40600:function(t){Object(o["a"])({type:"fail",message:t,duration:1e3}),this.handle()},40100:function(t){Object(o["a"])({type:"fail",message:t,duration:1e3}),setTimeout(function(){if(Object(l["b"])()&&Object(l["d"])(),Object(u["j"])())return location.reload(),!0;s["a"].jumpLogin()},1e3)},40400:function(t){Object(o["a"])({type:"fail",message:t,duration:1e3})},40000:function(){return!0}};f.interceptors.request.use(function(t){return void 0===t.data&&(t.data={}),t.data.token=Object(l["b"])(),t},function(t){return Promise.reject(t).catch(function(t){return t})}),f.interceptors.response.use(function(t){var e=t.data;return 2e4!==e.code?(d[e.code]&&d[e.code](e.msg),Promise.reject(e).catch(function(t){return t})):e},function(t){return Object(o["a"])({type:"fail",message:t.message}),Promise.reject(t).catch(function(t){return t})}),e["a"]=f},be18:function(t,e,n){},d5c9:function(t,e,n){},dc72:function(t,e,n){},e62a:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticClass:"button-content",class:{buttonFixed:t.isFixed}},[n("van-button",{directives:[{name:"show",rawName:"v-show",value:t.showStatus,expression:"showStatus"}],ref:"buttonSelector",style:t.styleButton,attrs:{"native-type":"button",type:"info",size:"large",block:!0},on:{click:t.buttonConfirm}},[t._v(t._s(t.title))])],1),n("van-row",{class:{"bottom-fixed-hide":!t.isFixed},style:t.styleButtonFixed})],1)},i=[];function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(n,!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={data:function(){return{showStatus:!0,styleButton:{},styleButtonFixed:{}}},props:{title:{type:String,default:""},background:{type:String,default:"#46aef7"},isFixed:{type:Boolean,default:!0},textColor:{type:String,default:"#fff"}},created:function(){},mounted:function(){this.init(),this.screenSizeControl(),this.styleButtonHandle()},methods:{init:function(){var t=this.$refs.buttonSelector.offsetHeight+10;this.styleButtonFixed={height:t+"px"}},buttonConfirm:function(){this.$emit("buttonConfirm")},screenSizeControl:function(){var t=this,e=document.documentElement.clientHeight||document.body.clientHeight;window.onresize=function(){var n=document.documentElement.clientHeight||document.body.clientHeight,o=e-n;t.showStatus=!(n<e&&o>100)}},styleButtonHandle:function(){this.styleButton={"background-color":this.background,border:"1px solid"+this.background,color:this.textColor}}},watch:{background:function(t,e){var n={"background-color":t,border:"1px solid"+t};this.styleButton=c({},this.styleButton,{},n)}}},l=s,u=(n("fc10"),n("2877")),f=Object(u["a"])(l,o,i,!1,null,"68d620b5",null);e["a"]=f.exports},fc10:function(t,e,n){"use strict";var o=n("d5c9"),i=n.n(o);i.a}}]);